(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{148:function(e,t,a){"use strict";a.r(t),a(150),a(151),a(152),a(79),a(164),a(86);var n=a(165),s=a.n(n),i=(a(158),a(166)),r=a.n(i),o=a(12),c=a.n(o),l=a(51),d=a.n(l),u=a(0),m=a.n(u),p=(a(36),a(155)),h=a.n(p),f=function(e){function t(t){var a;return(a=e.call(this,t)||this).params={},void 0!=t.location.href&&(a.params=(h.a.parse(t.location.href,!0)||{query:{}}).query),a}c()(t,e);var a=t.prototype;return a.set=function(){var e=r()(s.a.mark(function e(t){var a=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){a.setState(t,e)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.getJSOND=function(){var e=r()(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){window.$.getJSON("https://dl.dropboxusercontent.com/s/"+t+"/"+a+".json",function(t){e(t)})}));case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),t}(u.Component),v=a(168),g=(a(183),a(161)),b=a.n(g),E=a(169),_=a.n(E),y=(a(171),a(172)),x=a(175),w=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={modal:{}},a}return c()(t,e),t.prototype.render=function(){var e,t=this,a=this.props.modal;return void 0!=this.props.modal.exec&&(e=m.a.createElement("button",{id:"modal_exec_btn",type:"button",className:"btn btn-"+(this.props.modal.exec_color||"danger"),onClick:function(){1==!window.$("#modal_exec_btn").hasClass("btn-gray")&&(window.$("#pageModal").modal("hide"),t.props.modal.exec())}},this.props.modal.exec_text||"実行")),m.a.createElement("div",{className:"modal fade",id:"pageModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},m.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},m.a.createElement("div",{className:"modal-content"},m.a.createElement("div",{className:"modal-header"},m.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},a.title),m.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"})),m.a.createElement("div",{className:"modal-body",style:{wordBreak:"break-all"}},a.body),m.a.createElement("div",{className:"modal-footer"},m.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},a.cancel_text||"取り消し"),e))))},t}(u.Component),k=function(e){function t(t){return e.call(this,t)||this}return c()(t,e),t.prototype.render=function(){var e=m.a.createElement("p",{className:"h4 text-muted font-weight-normal mb-6"},this.props.message||"法定通貨に依存しない完全独自経済圏で好きなことを追求して生きていこう！");return this.props.no_message&&(e=null),m.a.createElement("div",{className:"page",style:{width:"100%"}},m.a.createElement("div",{className:"page-content"},m.a.createElement("div",{className:"container text-center"},m.a.createElement("div",{className:"display-1 text-muted mb-5",style:{fontSize:"40px"}},m.a.createElement("i",{className:"si si-exclamation"})," ",this.props.title||"データ取得中"),m.a.createElement("h1",{className:"h2 mb-4"},this.props.subtitle||"少々お待ち下さい..."),e,m.a.createElement("a",{className:"btn btn-primary",href:this.props.btn_link||"/"},m.a.createElement("i",{className:"fe fe-arrow-left mr-2"}),this.props.btn_text||"トップページへ戻る"))))},t}(u.Component),N=a(176),A=(a(177),function(e){function t(t){return e.call(this,t)||this}return c()(t,e),t.prototype.render=function(){var e=this,t=[],a=function(){if(s){if(i>=n.length)return"break";r=n[i++]}else{if((i=n.next()).done)return"break";r=i.value}var a=r,o=void 0;void 0!=a.icon&&(o=m.a.createElement("i",{className:"mr-2 "+(a.fa_type||"fa")+" fa-"+a.icon}));var c=void 0;if(void 0!=a.href){var l="",d=e.props.location.pathname.toLowerCase();(a.active||d===a.href)&&(l="active");var u=a.href;c=m.a.createElement("a",{href:u,className:"nav-link "+l},o,a.name)}else{var p="";a.key===e.props.component.state.tab&&(p="active"),c=m.a.createElement("a",{onClick:function(){e.props.component.setState({tab:a.key},function(){void 0!=a.func&&a.func()})},className:"nav-link "+p},o,a.name)}t.push(m.a.createElement("li",{className:"nav-item",key:"topic-"+(a.key||"all")},c))},n=this.props.items,s=Array.isArray(n),i=0;for(n=s?n:n[Symbol.iterator]();;){var r;if("break"===a())break}return m.a.createElement("div",{className:"header collapse d-lg-flex p-0",id:"headerMenuCollapse"},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"row align-items-center"},m.a.createElement("div",{className:"col-lg order-lg-first"},m.a.createElement("ul",{className:"nav nav-tabs border-0 flex-column flex-lg-row"},t)))))},t}(u.Component));_.a.locale("ja");var z=function(e){function t(t){return e.call(this,t)||this}c()(t,e);var a=t.prototype;return a.unpublishArticle=function(e){var t=this;this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-exclamation-triangle"})," ","取り下げ確認！"),body:m.a.createElement("p",null,"本当に",m.a.createElement("span",{className:"text-capitalize"},"『",e.title,"』"),"を取り下げてよろしいですか？"),cancel_text:"キャンセル",exec_text:"実行",exec:function(){t.props.auth.unpublishArticle(e,t.props.magazine_id)}})},a.publishArticle=function(e){var t=this;this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-exclamation-triangle"})," 投稿確認！"),body:m.a.createElement("p",null,"本当に",m.a.createElement("span",{className:"text-capitalize"},"『",e.title,"』"),"を投稿してよろしいですか？"),cancel_text:"キャンセル",exec_text:"実行",exec:function(){t.props.auth.publishArticle(e,t.props.magazine_id)}})},a.render=function(){var e,t=this;1!=this.props.nomore_articles&&(e=m.a.createElement("button",{style:{borderRadius:0},className:"btn btn-primary",onClick:function(){t.props.auth.listArticles(t.props.articles_page)}},"さらに読み込み"));var a=[],n=[];console.log(this.props);var s=function(){if(r){if(o>=i.length)return"break";c=i[o++]}else{if((o=i.next()).done)return"break";c=o.value}var s,l=c;s=void 0!=t.props.userArticles&&void 0!=t.props.userArticles[l.article_id]&&void 0!=t.props.userArticles[l.article_id][t.props.magazine_id]?m.a.createElement("button",{className:"btn btn-danger",onClick:function(){t.unpublishArticle(l)}},"却下"):m.a.createElement("button",{className:"btn btn-success",onClick:function(){t.publishArticle(l)}},"投稿"),n.push(m.a.createElement("tr",null,m.a.createElement("td",null,m.a.createElement("div",null,m.a.createElement("a",{href:"https://alis.to/"+l.user_id+"/articles/"+l.article_id,target:"_blank"},m.a.createElement("b",null,l.title))),m.a.createElement("div",{className:"text-muted small"},_()(1e3*l.published_at).format("YYYY MM/DD HH:mm"),m.a.createElement("span",{className:"ml-6"},m.a.createElement("b",{className:"text-orange"},l.alis_token)))),m.a.createElement("td",{className:"text-center"},s))),a=[m.a.createElement("div",{className:"table-responsive"},m.a.createElement("table",{className:"table card-table table-striped table-vcenter"},m.a.createElement("thead",null,m.a.createElement("th",null,"ALIS記事"),m.a.createElement("th",{className:"text-center"})),m.a.createElement("tbody",null,n))),e]},i=this.props.magazineArticles||[],r=Array.isArray(i),o=0;for(i=r?i:i[Symbol.iterator]();;){var c;if("break"===s())break}return a},t}(u.Component),M=(a(185),a(210)),S=a.n(M);_.a.locale("ja");var T=function(e){function t(t){var a;return(a=e.call(this,t)||this).state={tab:"reward"},a}c()(t,e);var a=t.prototype;return a.issueMagazine=function(e){var t=window.$('[name="editors"]:checked').val(),a=window.$("#magazine_title").val(),n=window.$("#magazine_description").val();if(void 0==t)this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","編集者未選択！"),body:m.a.createElement("p",null,"共同編集者を選択してください。"),cancel_text:"確認"});else if(null!==a.match(/^\s*$/))this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","タイトル未入力"),body:m.a.createElement("p",null,"マガジンのタイトルを入力してください。"),cancel_text:"確認"});else if(a.length>50)this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","タイトルが長すぎます"),body:m.a.createElement("p",null,"マガジンのタイトルは50文字以内で入力してください。"),cancel_text:"確認"});else if(void 0!=n&&n.length>200)this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","説明文が長すぎます"),body:m.a.createElement("p",null,"マガジンの概要は200文字以内で入力してください。"),cancel_text:"確認"});else{var s={is_edit:e,title:a,editors:t,owner:this.props.user.uid};null===n.match(/^\s*$/)&&(s.description=n),e?(s.id=this.props.magazine.id,s.file_id=this.props.magazine_id):(s.id=S()(),window.$("#magazine_title").val(""),window.$("#magazine_description").val("")),this.props.auth.issueMagazine(s)}},a.deleteMagazine=function(){var e=this;this.props.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-exclamation-triangle"})," ","マガジン削除確認"),body:m.a.createElement("p",null,"『",m.a.createElement("b",{className:"text-danger"},this.props.magazine.title),"』 を本当に削除してよろしいですか？"),exec_text:"実行",exec:function(){e.props.auth.deleteMagazine(e.props.magazine)}})},a.render=function(){var e,t=this,a="発刊";void 0!=this.props.magazine&&(a="保存",e=m.a.createElement("a",{onClick:function(){t.deleteMagazine()},className:"btn btn-red btn-sm text-white ml-5"},"削除"));var n=[],s=function(){if(r){if(o>=i.length)return"break";c=i[o++]}else{if((o=i.next()).done)return"break";c=o.value}var e=c;n.push(m.a.createElement("tr",{key:e.id,style:{cursor:"pointer"},onClick:function(){window.location.href="/magazines/?id="+e.file_id}},m.a.createElement("td",null,m.a.createElement("div",null,m.a.createElement("b",null,e.title)),m.a.createElement("div",{className:"small text-muted"},_()(e.created_at).format("MM/DD 発刊"))),m.a.createElement("td",null,m.a.createElement("div",{className:"small"},e.description||""))))},i=b()(this.props.userMagazines||[]).sortBy(function(e){return-1*(e.created_at||0)}),r=Array.isArray(i),o=0;for(i=r?i:i[Symbol.iterator]();;){var c;if("break"===s())break}var l="",d="",u={me:"",anyone:""};return void 0!=this.props.magazine?(l=this.state.magazine_title||this.props.magazine.title,d=this.state.magazine_description||this.props.magazine.description,u[this.state.magazine_editors||this.props.magazine.editors]="checked"):(l=this.state.magazine_title,d=this.state.magazine_description,u[this.state.magazine_editors]="checked"),m.a.createElement("div",{className:"card"},m.a.createElement("div",{className:"card-header"},m.a.createElement("h3",{className:"card-title"},m.a.createElement("span",{className:"stamp stamp-sm bg-green mr-3"},m.a.createElement("i",{className:"fa fa-book"})),"共同マガジン",a),m.a.createElement("div",{className:"card-options"},m.a.createElement("a",{onClick:function(){t.issueMagazine(void 0!=t.props.magazine)},className:"btn btn-green btn-sm text-white"},a),e)),m.a.createElement("div",{className:"card-body"},m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-label"},"マガジン名"),m.a.createElement("input",{onChange:function(e){t.setState({magazine_title:e.target.value})},value:l,id:"magazine_title",type:"text",className:"form-control",name:"example-text-input",placeholder:"マガジン名"}),m.a.createElement("div",{className:"form-group mt-3"},m.a.createElement("label",{className:"form-label"},"マガジン概要（省略可）"),m.a.createElement("textarea",{id:"magazine_description",className:"form-control",name:"example-textarea-input",rows:"2",placeholder:"マガジン概要",onChange:function(e){t.setState({description:e.target.value})}},d)),m.a.createElement("div",{className:"form-group"},m.a.createElement("label",{className:"form-label"},"共同編集者（後で個別追加・変更可能）"),m.a.createElement("div",{className:"selectgroup w-100"},m.a.createElement("label",{className:"selectgroup-item"},m.a.createElement("input",{onClick:function(){t.setState({magazine_editors:"me"})},checked:u.me,type:"radio",name:"editors",value:"me",className:"selectgroup-input"}),m.a.createElement("span",{className:"selectgroup-button"},"自分のみ")),m.a.createElement("label",{className:"selectgroup-item"},m.a.createElement("input",{onClick:function(){t.setState({magazine_editors:"anyone"})},checked:u.anyone,type:"radio",name:"editors",value:"anyone",className:"selectgroup-input"}),m.a.createElement("span",{className:"selectgroup-button"},"誰でも")))))))},t}(u.Component),I=function(e){function t(t){return e.call(this,t)||this}return c()(t,e),t.prototype.render=function(){var e=this,t=[];return(this.props.items||[]).forEach(function(a,n){t.push(m.a.createElement("div",{role:"alert",className:"alert alert-"+a.type+" ml-3 mr-3",style:{width:"100%"}},m.a.createElement("button",{type:"button",className:"close",onClick:function(){e.props.alerts.dissmissAlert(n)}}),a.text))}),m.a.createElement("div",{className:"row"},t)},t}(u.Component),C=(a(89),a(87),a(88),a(219),a(220),a(222),a(223)),H=a.n(C),U=a(233),R=a.n(U);a(236);var $={error_exists:{title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-ban"})," 認証エラー！"),body:"そのアカウントは既に他のユーザーに使われています。",cancel_text:"確認"},error_account_removal:{title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-ban"})," エラー！"),body:"アカウント取り消しに失敗しました。時間を置いてもう一度お試し下さい。",cancel_text:"確認"},error_general:{title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-ban"})," エラーが発生しました！"),body:"時間を置いてからもう一度申請して下さい。",cancel_text:"確認"}},D={apiKey:"AIzaSyAfO9TqOJHSaNa_2ndYeCCCat0FoaBxdRE",authDomain:"testnet-e8843.firebaseapp.com",databaseURL:"https://testnet-e8843.firebaseio.com",projectId:"testnet-e8843",storageBucket:"testnet-e8843.appspot.com",messagingSenderId:"856982764391",timestampsInSnapshots:!0};H.a.initializeApp(D),console.log(D);var L=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),this.opts=t,this.component=e,"undefined"!=typeof window){var s=a(237),i=s.MAINNET_CONFIG;i=s.TESTNET_CONFIG,this.Waves=s.create(i),this.db=H.a.firestore(),this.provider=new H.a.auth.TwitterAuthProvider,this.provider_github=new H.a.auth.GithubAuthProvider,H.a.auth().useDeviceLanguage(),H.a.auth().onAuthStateChanged(function(e){e?n.setUser(e,function(e){n.getUserInfo(e)}):!0===n.opts.redirect?window.location.href="/":n.component.setState({user:null,isUser:!1})})}}var t=e.prototype;return t.searchTweeple=function(e,t,a){this.db.collection("tweeple").doc(e).get().then(function(e){t(e)}).catch(function(e){a(e)})},t.setData=function(e,t,a){var n=this;void 0==a&&(a=function(e){console.log(e),n.component.alerts.pushAlert("エラーが発生しました。時間をおいてもう一度お試し下さい！")}),this.db.collection("users").doc(this.component.state.user.uid).set(e,{merge:!0}).then(function(e){t()}).catch(function(e){a(e)})},t.updateData=function(e,t,a){var n=this;void 0==a&&(a=function(s){console.log(s),null!==s.toString().match(/no document to update/i)?n.setData(e,t,a):n.component.alerts.pushAlert("エラーが発生しました。時間をおいてもう一度お試し下さい！")}),this.db.collection("users").doc(this.component.state.user.uid).update(e).then(function(e){t()}).catch(function(e){a(e)})},t.confirmMission=function(e){var t=this,a=this.component.state.userInfo||{};void 0==a.missions&&(a.missions={}),void 0==a.missions[e]&&(a.missions[e]={tasks:{}}),void 0==a.missions[e].confirmed&&(a.missions[e].confirmed=Date.now());var n=[],s=!1,i=this.component.mission.tasks,r=Array.isArray(i),o=0;for(i=r?i:i[Symbol.iterator]();;){var c;if(r){if(o>=i.length)break;c=i[o++]}else{if((o=i.next()).done)break;c=o.value}var l=c;void 0!=l.social?void 0!=(this.component.state.social_links||{})[l.social+".com"]?n.push({task_id:l.id,social:l.social,id:this.component.state.social_links[l.social+".com"].uid}):void 0!=(this.component.state.serverInfo||{})[l.social]?n.push({task_id:l.id,social:l.social,id:this.component.state.serverInfo[l.social].id}):s=!0:n.push(!1)}if(1!=s){var d={uid:this.component.state.user.uid,mission_id:"join",date:Date.now(),tasks:n,confirmed:!1},u="join_"+d.uid;this.db.collection("mission_pool").doc(u).set(d).then(function(e){t.setUserInfo("missions",a.missions,function(){t.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-success fas fa-check"})," ミッション確定！"),body:"ミッションを確定しました。２４時間以内に認証されます。しばらくお待ち下さい。",cancel_text:"確認"})})}).catch(function(e){console.log(e),t.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-ban"})," 認証エラー！"),body:"エラーが発生しました！時間を置いてもう一度お試し下さい。",cancel_text:"確認"})})}else this.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fas fa-ban"})," 認証エラー！"),body:"エラーが発生しました！時間を置いてもう一度お試し下さい。",cancel_text:"確認"})},t.completeTask=function(e,t){var a=this.component.state.userInfo||{};void 0==a.missions&&(a.missions={}),void 0==a.missions[e]&&(a.missions[e]={tasks:{}}),a.missions[e].tasks[t]=Date.now(),this.setUserInfo("missions",a.missions,function(){})},t.getUserInfo=function(e){var t=this;this.db.collection("users").doc(e.uid).get().then(function(a){var n=a.data()||{};t.component.setState({userInfo:n},function(){t.getServerInfo(e),t.getUserTip(e),!0!==t.opts.magazine&&(t.getUserHistory(e),t.getUserPayment(e),t.getUserArticles(e),t.getUserMagazines()),void 0!=t.opts.oauth&&t.validateWavesAddress(t.opts.oauth),"955140685392424961"===t.component.state.user.id&&!0===t.opts.adminPayment&&t.getAdminPayment(),"955140685392424961"===t.component.state.user.id&&!0===t.opts.adminReport&&t.getAdminReport()})}).catch(function(e){console.log(e)})},t.getServerInfo=function(e){var t=this;this.db.collection("users_server").doc(e.uid).get().then(function(e){var a=e.data()||{};t.component.setState({serverInfo:a},function(){})}).catch(function(e){console.log(e)})},t.getUserHistory=function(e){var t=this;this.db.collection("users").doc(e.uid).collection("history").get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),a=b()(a).sortBy(function(e){return-1*e.date}),t.component.setState({history:a},function(){})}).catch(function(e){console.log(e)})},t.getUserTip=function(e){var t=this;this.db.collection("users").doc(e.uid).collection("tip").get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),a=b()(a).sortBy(function(e){return-1*e.date}),t.component.setState({tip_history:a},function(){})}).catch(function(e){console.log(e)})},t.listArticles=function(e){var t=this,a=this.component.state.user.uid;window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/list/articles/"+a+"/"+this.component.state.serverInfo.alis.user_id,{LastEvaluatedKey:e},function(a){if(null!=a.error)t.component.showModal($.error_general);else{var n=(t.component.state.magazineArticles||[]).concat(a.articles),s={articles_page:a.LastEvaluatedKey,magazineArticles:n};0!=a.articles.length&&void 0!=a.LastEvaluatedKey||(s.nomore_articles=!0),t.component.setState(s,function(){void 0==e&&t.getUserMagazineArticles()})}})},t.getUserMagazineArticles=function(){var e=this;this.db.collection("users_server").doc(this.component.state.user.uid).collection("magazine_articles").get().then(function(t){var a={};t.forEach(function(e){console.log(e.data()),a[e.id]=e.data()}),e.component.setState({userArticles:a},function(){})}).catch(function(e){console.log(e)})},t.getUserMagazines=function(){var e=this;this.db.collection("users_server").doc(this.component.state.user.uid).collection("magazines").get().then(function(t){var a=[];t.forEach(function(e){a.push(e.data())}),e.component.setState({userMagazines:a},function(){})}).catch(function(e){console.log(e)})},t.publishArticle=function(e,t){var a=this;this.genRandomValue(function(n){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/upload/article/",{random_value:n,article:JSON.stringify(e),uid:a.component.state.user.uid,mid:t},function(t){console.log(t),null!=t.error?a.component.showModal($.error_general):(a.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-green fas fa-check"})," 投稿しました！"),body:e.title+"をマガジンに投稿しました！",cancel_text:"確認"}),a.getUserMagazineArticles())})})},t.unpublishArticle=function(e,t){var a=this;this.genRandomValue(function(n){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/unpublish/article/",{random_value:n,article:JSON.stringify(e),uid:a.component.state.user.uid,mid:t},function(t){null!=t.error?a.component.showModal($.error_general):(console.log(t),a.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-green fas fa-check"})," ","投稿を取り下げしました！"),body:e.title+"をマガジンから取り下げました！",cancel_text:"確認"}),a.getUserMagazineArticles())})})},t.tip=function(e,t,a){var n=this;this.genRandomValue(function(s){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/tip/",{random_value:s,article:JSON.stringify(t),uid:n.component.state.user.uid,magazine_id:a,amount:e},function(a){null!=a.error?n.component.showModal($.error_general):(n.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-green fas fa-check"})," 投げ銭完了！"),body:m.a.createElement("div",null,"『",t.title,"』に ",m.a.createElement("b",{className:"text-primary"},e),"AHT投げ銭しました！"),cancel_text:"確認"}),n.getServerInfo(n.component.state.user),n.getUserTip(n.component.state.user))})})},t.getUserArticles=function(e){var t=this;this.db.collection("users").doc(e.uid).collection("articles").get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),a=b()(a).sortBy(function(e){return-1*e.published_at}),t.component.setState({articles:a},function(){})}).catch(function(e){console.log(e)})},t.getAdminPayment=function(){var e=this;this.db.collection("history").where("payment_from","==","admin").get().then(function(t){var a=[];t.forEach(function(e){a.push(e.data())}),a=b()(a).sortBy(function(e){return-1*e.date}),e.component.setState({admin_history:a},function(){})}).catch(function(e){console.log(e)})},t.getAdminReport=function(){var e=this;this.db.collection("report").get().then(function(t){var a={};t.forEach(function(e){var t=e.data();a[t.alis]=t.twitter}),e.component.setState({reports:a},function(){})}).catch(function(e){console.log(e)})},t.getUserPayment=function(e){var t=this;this.db.collection("users").doc(e.uid).collection("payment").get().then(function(e){var a=[];e.forEach(function(e){a.push(e.data())}),a=b()(a).sortBy(function(e){return-1*e.date}),t.component.setState({payment:a},function(){})}).catch(function(e){console.log(e)})},t.authenticateAlisUser=function(e){var t=this;this.genRandomValue(function(a){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/auth/alis/",{random_value:a,token:e,uid:t.component.state.user.uid},function(e){null!=e.error?4===e.error?t.component.showModal($.error_exists):t.component.showModal($.error_general):t.getUserInfo(t.component.state.user)})})},t.retry=function(){var e=this,t=this.component.state.userInfo.missions,a=t.join.revoke;for(var n in t.join.tasks)a.includes("task-"+n)&&delete t.join.tasks[n];delete t.join.revoke,this.setUserInfo("missions",t,function(){e.component.alerts.pushAlert("重複アカウントによるタスクを取り消しました。別アカウントで再トライして下さい！","success")})},t.setUser=function(e,t){var a={created_at:e.metadata.creationTime,displayName:e.displayName,photoURL:e.photoURL,uid:e.uid,id:e.providerData[0].uid},n={};e.providerData.forEach(function(e){n[e.providerId]=e}),this.component.setState({user:a,isUser:!0,social_links:n},function(){void 0!=t&&t(a)})},t.makePayment=function(e,t,a,n){var s=this;this.genRandomValue(function(i){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/payment/",{type:n,random_value:i,uid:s.component.state.user.uid,twitter_id:s.component.state.user.id,amount:t,to:e.uid,what_for:a,photoURL:e.photoURL,displayName:e.displayName},function(a){null!=a.error?(console.log(a),s.component.showModal($.error_general)):(s.getUserInfo(s.component.state.user),s.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-green fas fa-check"})," ","支払いが完了しました！"),body:e.displayName+"さんにハッカー部から"+t+"AHTの支払いをしました！",cancel_text:"確認"}))})})},t.link_discord=function(){var e=this;this.genRandomValue(function(t){var a="https://discordapp.com/api/oauth2/authorize?client_id=486270221825474562&redirect_uri="+encodeURIComponent("https://dry-caverns-24809.herokuapp.com")+"%2Ftestnet%2Foauth%2Fdiscord&response_type=code&scope=guilds%20identify%20messages.read&state="+t+"_"+e.component.state.user.uid;window.location.href=a})},t.link_github=function(){var e=this;H.a.auth().currentUser.linkWithPopup(this.provider_github).then(function(t){e.setUser(t.user)}).catch(function(t){console.log(t),e.component.showModal($.error_exists)})},t.registerPayment=function(e,t){var a=this,n=this.component.state.user.uid,s=this.component.state.payment,i=Date.now(),r={amount:e,address:t,date:i,status:"requested"},o={uid:n,amount:e,address:t,date:i,status:"requested"};s.unshift(r),this.db.collection("users").doc(n).collection("payment").doc(i+"_"+e).set(r).then(function(){a.component.setState({payment:s})}),this.db.collection("payment_pool").doc(n+"_"+i).set(o).then(function(){a.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-warning fas fa-exclamation-triangle"})," ","支払い手続き開始！"),body:m.a.createElement("p",null,"トークンの送信リストに登録しました。数分～数十分以内に指定のアドレスにトークンが送信されます。手続きの進行状況は支払い履歴から確認できます。"),cancel_text:"確認"})})},t.getAllCandidates=function(){var e=this;this.db.collection("twitter_candidates").get().then(function(t){var a=[];t.forEach(function(e){var t=e.data();a.push({alis:e.id,candidates:t})}),e.component.setState({allCandidates:a})})},t.chooseCandidate=function(e,t,a){var n,s=a.state.allCandidates,i=s,r=Array.isArray(i),o=0;for(i=r?i:i[Symbol.iterator]();;){var c;if(r){if(o>=i.length)break;c=i[o++]}else{if((o=i.next()).done)break;c=o.value}var l=c;if(l.alis==e){for(var d in l.candidates||{})d.toLowerCase()==t.toLowerCase()?l.candidates[d].checked=!0:delete l.candidates[d].checked;n=l.candidates;break}}this.db.collection("twitter_candidates").doc(e).set(n).then(function(){a.setState({allCandidates:s})})},t.existsTweeple=function(e,t){this.db.collection("tweeple").where("screen_name_lower","==",e.toLowerCase()).limit(1).get().then(function(e){var a=!1;e.forEach(function(){a=!0}),t(a)}).catch(function(e){t(!1)})},t.addCandidate=function(e,t,a){var n,s=this,i=a.state.candidates||[];this.db.collection("twitter_candidates").doc(t.user_id).set((n={},n.$profile=t,n[""+e]={date:Date.now(),uid:this.component.state.user.uid},n),{merge:!0}).then(function(){i.push(e),a.setState({candidates:i}),s.component.alerts.pushAlert("登録しました！確認後リストに追加されますのでしばしお待ち下さい。","success")}).catch(function(e){s.component.showModal($.error_general)})},t.getCandidates=function(e,t){this.db.collection("twitter_candidates").doc(e).get().then(function(e){var a=[];if(e.exists){var n=e.data();for(var s in n)"$profile"!==s&&a.push(s);t.setState({candidates:a})}})},t.reportError=function(e){var t=this,a=this.component.state.user.uid+"_"+Date.now();this.db.collection("report").doc(a).set({twitter:e.id_str,alis:e.user_id}).then(function(){var a=t.component.state.reports||{};a[e.user_id]=e.id_str,t.component.setState({reports:a})}).catch(function(e){t.component.showModal($.error_general)})},t.unlink_github=function(){var e=this;H.a.auth().currentUser.unlink("github.com").then(function(t){e.setUser(t)}).catch(function(t){e.component.showModal($.error_account_removal)})},t.getMagazine=function(){var e=this;console.log(this.component.state),this.db.collection("magazines").doc(this.component.state.magazine_id).get().then(function(t){t.exists&&e.component.setState({magazine:t.data()})})},t.deleteMagazine=function(e){var t=this;this.genRandomValue(function(a){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/magazine/delete/"+t.component.state.user.uid+"/"+a+"/",e,function(){var a=r()(s.a.mark(function a(n){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:null!=n.error?t.component.showModal($.error_general):(e.deleted=Date.now(),t.component.setState({magazine:e,updated:Date.now()},function(){t.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-success fas fa-check"})," 削除完了！"),body:"マガジンを削除しました。",cancel_text:"確認"})}));case 1:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())})},t.issueMagazine=function(e){var t=this;this.genRandomValue(function(a){window.$.post("https://dry-caverns-24809.herokuapp.com/testnet/magazine/issue/"+t.component.state.user.uid+"/"+a+"/",e,function(){var a=r()(s.a.mark(function a(n){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:null!=n.error?t.component.showModal($.error_general):(e.is_edit?t.component.setState({magazine:e,updated:Date.now()},function(){t.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-success fas fa-check"})," 設定変更！"),body:"マガジンの設定を変更しました。変更が反映されるまで最大で1時間程かかります。",cancel_text:"確認"})}):t.component.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-success fas fa-check"})," マガジン発刊！"),body:"新マガジン『"+e.title+"』を発刊しました！",cancel_text:"確認"}),t.getUserMagazines());case 1:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}())})},t.unlink_discord=function(){var e=this;this.genRandomValue(function(t){fetch("https://dry-caverns-24809.herokuapp.com/testnet/remove/discord/"+e.component.state.user.uid+"/"+t+"/",{method:"POST"}).then(function(e){return e.json()}).then(function(t){void 0==t.error?e.getServerInfo(e.component.state.user):e.component.showModal($.error_account_removal)}).catch(function(){e.component.showModal($.error_account_removal)})})},t.unlink_alis=function(){var e=this;this.genRandomValue(function(t){fetch("https://dry-caverns-24809.herokuapp.com/testnet/remove/alis/"+e.component.state.user.uid+"/"+t+"/",{method:"POST"}).then(function(e){return e.json()}).then(function(t){void 0==t.error?e.getServerInfo(e.component.state.user):e.component.showModal($.error_account_removal)}).catch(function(){e.component.showModal($.error_account_removal)})})},t.login=function(){H.a.auth().signInWithPopup(this.provider).then(function(){window.location.href="/home/"}).catch(function(e){alert("ログインに失敗しました！もう一度お試し下さい。")})},t.logout=function(){H.a.auth().signOut().then(function(){window.location.href="/"}).catch(function(e){alert("ログアウトに失敗しました。もう一度お試し下さい。")})},t.validateWavesAddress=function(e){var t=e,a=h.a.parse(t,!0),n=a.query.d;console.log(n),a.query.s;var s,i,r=a.query.p,o=a.query.a;if(void 0!=a.query.d){var c=n.split("_");s=c[0],i=c[1]}console.log(o),console.log(this.Waves.crypto.isValidAddress(o)),void 0!=n&&i!=this.component.state.user.uid||void 0!=n&&s!=this.component.state.userInfo.random_value||0==this.Waves.crypto.isValidAddress(o)?this.component.alerts.pushAlert("認証に失敗しました。時間を置いて再度お試し下さい。"):this.addWavesAddress({publickKey:r,address:o,added_at:Date.now()})},t.setAsReceiver=function(e){var t=this,a=this.component.state.userInfo.waves_addresses||{};for(var n in a)n==e?a[n].receiver=!0:delete a[n].receiver;this.setUserInfo("waves_addresses",a,function(){t.component.alerts.pushAlert("受け取りアドレスを"+e+" に変更しました！","success")})},t.checkAddressInPool=function(e,t){var a=this;this.db.collection("addresses").doc(e).get().then(function(n){n.exists?a.component.alerts.pushAlert(e+"は既に他の人に登録されているため使えません。"):t()}).catch(function(e){console.log(e),a.component.alerts.pushAlert("エラーが発生しました。時間をおいてもう一度お試し下さい！")})},t.addWavesAddress=function(e){var t=this,a=this.component.state.userInfo.waves_addresses||{};void 0!=a[e.address]?this.component.alerts.pushAlert(e.address+" は既に登録されています！","warning"):this.checkAddressInPool(e.address,function(){b.a.isEmpty(a)&&(e.receiver=!0),a[e.address]=e,t.setUserInfo("waves_addresses",a,function(){t.addAddressToPool(e.address,function(){t.component.alerts.pushAlert(e.address+" を追加しました！","success")})})})},t.setUserInfo=function(e,t,a){var n,s=this;this.updateData(((n={})[e]=t,n),function(){var n=s.component.state.userInfo||{};n[e]=t,s.component.setState({userInfo:n},function(){}),a()})},t.removeAddressFromPool=function(e,t){this.db.collection("addresses").doc(e).delete().then(function(e){t()}).catch(function(e){t()})},t.addAddressToPool=function(e,t){this.db.collection("addresses").doc(e).set({uid:this.component.state.user.uid}).then(function(e){t()}).catch(function(e){t()})},t.genRandomValue=function(e){var t=this,a=R()();this.setData({random_value:a},function(){var n=t.component.state.userInfo||{};n.random_value=a,t.component.setState({userInfo:n},function(){e(a)})})},t.removeWavesAddress=function(e){var t=this,a=this.component.state.userInfo.waves_addresses||{};delete a[e],this.setUserInfo("waves_addresses",a,function(){t.removeAddressFromPool(e,function(){t.component.alerts.pushAlert(e+" を削除しました！")})})},e}(),P=function(){function e(e){this.component=e}var t=e.prototype;return t.pushAlert=function(e,t){void 0===t&&(t="danger");var a=this.component.state.alerts||[];a.unshift({type:t,text:e}),this.component.setState({alerts:a},function(){})},t.dissmissAlert=function(e){var t=this.component.state.alerts||[];t.splice(e,1),this.component.setState({alerts:t})},e}(),q=a(238),j=a.n(q),O=a(239),V=a.n(O);_.a.locale("ja");var J=function(e){function t(t){var a;(a=e.call(this,t)||this).showModal=function(e){a.setState({modal:e},function(){window.$("#pageModal").modal({})})};var n=1*(a.params.page||1),s=a.params.id||"top";return void 0!=t.pageContext&&void 0!=t.pageContext.file_id&&(s=t.pageContext.file_id),a.state={pageContext:t.pageContext,tab:"articles",tip:0,page:n,magazine_id:s,serverInfo:{},userInfo:{},modal:{},alerts:[]},a.alerts=new P(d()(d()(a)),{magazine:!0}),a}c()(t,e);var a=t.prototype;return a.is_editor=function(){return this.is_admin()||"admin"!==this.state.magazine_id&&void 0!=this.state.magazine&&"anyone"===this.state.magazine.editors&&void 0!=this.state.serverInfo&&void 0!=this.state.serverInfo.alis||void 0!=this.state.serverInfo&&void 0!=this.state.serverInfo.alis&&void 0!=this.state.userInfo&&void 0!=this.state.userInfo.missions&&void 0!=this.state.userInfo.missions.join&&void 0!=this.state.userInfo.missions.join.confirmed&&0!=this.state.userInfo.missions.join.confirmed},a.is_admin=function(){return"admin"!==this.state.magazine_id&&void 0!=this.state.magazine&&void 0!=this.state.user&&this.state.magazine.owner===this.state.user.uid},a.getMagazines=function(){var e=r()(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="lfaxje42gyqtrlx",e.prev=1,e.next=4,this.getJSOND(t,"magazines");case 4:if(void 0==(a=e.sent).maps||void 0==a.maps[this.state.page]){e.next=13;break}return e.next=8,this.getJSOND(a.maps[this.state.page],this.state.page);case 8:return n=e.sent,e.next=11,this.set({magazine_articles:n.magazines,len:n.len});case 11:e.next=15;break;case 13:return e.next=15,this.set({noMagazine:!0});case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(1),e.next=21,this.set({noMagazine:!0});case 21:case"end":return e.stop()}},e,this,[[1,17]])}));return function(){return e.apply(this,arguments)}}(),a.getMagazine_Articles=function(){var e=r()(s.a.mark(function e(){var t,a,n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="fy1fkiiaanicbu5","admin"!==this.state.magazine_id&&(t=this.state.magazine_id),e.prev=2,e.next=5,this.getJSOND(t,"magazines");case 5:if(a=e.sent,"admin"!==this.state.magazine_id||void 0==a.maps[this.state.magazine_id][this.state.page]){e.next=14;break}return e.next=9,this.getJSOND(a.maps[this.state.magazine_id][this.state.page],this.state.page);case 9:return n=e.sent,e.next=12,this.set({magazine_articles:n.articles,len:n.len});case 12:e.next=26;break;case 14:if(void 0==a.maps||void 0==a.maps.map[this.state.page]){e.next=23;break}return e.next=17,this.getJSOND(a.maps.map[this.state.page],this.state.page);case 17:return i=e.sent,e.next=20,this.setState({magazine:a.maps,magazine_articles:i.articles,len:i.len});case 20:this.checkMagazine(),e.next=26;break;case 23:return e.next=25,this.set({magazine:a,magazine_articles:[]});case 25:this.checkMagazine();case 26:e.next=33;break;case 28:return e.prev=28,e.t0=e.catch(2),console.log(e.t0),e.next=33,this.set({noMagazine:!0});case 33:case"end":return e.stop()}},e,this,[[2,28]])}));return function(){return e.apply(this,arguments)}}(),a.componentDidMount=function(){var e=r()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth=new L(this,{}),"top"!==this.state.magazine_id){e.next=6;break}return e.next=4,this.getMagazines();case 4:e.next=8;break;case 6:return e.next=8,this.getMagazine_Articles();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a.checkMagazine=function(){var e=this;void 0==this.state.user?setTimeout(function(){e.checkMagazine()},500):this.is_admin()&&this.auth.getMagazine()},a.componentDidUpdate=function(){window.$(".waves-receiver").tooltip({boundary:"window",placement:"right"})},a.getMagazineTitle=function(e){var t="HACKER's CLUB MAGAZINE";"top"==this.state.magazine_id?t="ALISマガジン一覧":void 0!=this.state.pageContext&&void 0!=this.state.pageContext.title&&(t=this.state.pageContext.title);var a=m.a.createElement("img",{src:j.a,style:{borderRadius:"50%",marginRight:"10px",height:"35px",marginBottom:"6px"}});return void 0==this.state.magazine||void 0!=this.state.pageContext&&void 0!=this.state.pageContext.title||(a=null,t=this.state.magazine.title),e&&(t=[a,m.a.createElement("b",null,t)]),t},a.getMagazineDescription=function(e){var t;return"top"==this.state.magazine_id?t="ALISISTAの皆さんが発刊した共同マガジンのリストです。":void 0!=this.state.pageContext&&void 0!=this.state.pageContext.title?t=this.state.pageContext.description||"":void 0==this.state.magazine?t="ハッカー部の公式マガジンです。":void 0!=this.state.magazine.description&&(t=this.state.magazine.description),e?t:m.a.createElement("div",{className:"text-center mb-4"},t)},a.loadArticles=function(){this.auth.listArticles()},a.render=function(){var e=this,t=this.state.updated;t="ALIS MAGAZINES TESTNET";var a,n=[];(this.state.alerts||[]).forEach(function(t,a){n.push(m.a.createElement("div",{role:"alert",className:"alert alert-"+t.type+" ml-3 mr-3",style:{width:"100%"}},m.a.createElement("button",{type:"button",className:"close",onClick:function(){e.alerts.dissmissAlert(a)}}),t.text))}),a=!0===this.state.noMagazine||void 0!=this.state.magazine&&void 0!=this.state.magazine.deleted?m.a.createElement(k,{title:"マガジンが見つかりませんでした。",subtitle:"idをお確かめ下さい...",btn_text:"ハッカー部公式マガジンへ",btn_link:"/"}):void 0===this.state.magazine_articles?m.a.createElement(k,null):0===this.state.magazine_articles.length&&"articles"===this.state.tab?m.a.createElement(k,{title:this.state.magazine.title,subtitle:"このマガジンに記事を投稿してみましょう！",btn_text:"ハッカー部公式マガジンへ",btn_link:"/",message:this.state.magazine.description,no_message:void 0==this.state.magazine.description||""===this.state.magazine.description}):this.render_dashboard();var s,i=[{name:"記事",key:"articles",icon:"bookmark"}];void 0!=this.state.magazine&&void 0!=this.state.magazine.deleted||!this.is_editor()&&!this.is_admin()||(this.is_editor()&&(i.push({name:"投稿",key:"post",icon:"upload",func:function(){e.loadArticles()}}),this.is_admin()&&i.push({name:"設定",key:"settings",icon:"cogs"})),s=m.a.createElement(A,{items:i,component:this}));var r,o;return o="testnet.",void 0!=this.state.pageContext&&void 0!=this.state.pageContext.title&&(r=this.state.pageContext.cover_image||"https://"+o+"to.alishackers.club"+V.a),m.a.createElement(y.a,null,m.a.createElement(v.a,{title:""+this.getMagazineTitle(),desc:""+this.getMagazineDescription(!0),image:r}),m.a.createElement(N.a,{title:t,payment:this.state.payment,links:[],auth:this.auth,user:this.state.user,serverInfo:this.state.serverInfo}),s,m.a.createElement("div",{className:"my-3 my-md-5"},m.a.createElement("div",{className:"container"},m.a.createElement(I,{items:this.state.alerts,alerts:this.alerts}),a)),m.a.createElement(w,{modal:this.state.modal}),m.a.createElement(x.a,null))},a.increaseTipAmount=function(){var e=r()(s.a.mark(function e(t){var a,n,i,r,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Math.round(10*(this.state.tip+t))/10,n=this.getCurrentAHT(),i=n.currentAHT,n.afterAHT,!(i-a>=0)){e.next=11;break}return e.next=5,this.set({tip:a});case 5:r=this.getCurrentAHT(),o=r.currentAHT,c=r.afterAHT,window.$("#tip_amount").text(this.state.tip),window.$("#currentAHT").text(o),window.$("#afterAHT").text(c),window.$("#modal_exec_btn").removeClass("btn-gray"),window.$("#modal_exec_btn").addClass("btn-danger");case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.resetTipAmount=function(){var e=r()(s.a.mark(function e(){var t,a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.set({tip:0});case 2:t=this.getCurrentAHT(),a=t.currentAHT,n=t.afterAHT,window.$("#tip_amount").text(this.state.tip),window.$("#currentAHT").text(a),window.$("#afterAHT").text(n),window.$("#modal_exec_btn").removeClass("btn-danger"),window.$("#modal_exec_btn").addClass("btn-gray");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),a.getCurrentAHT=function(){var e=this.state.serverInfo.amount.aht,t=e.earned+(e.tipped||0),a=e.paid+(e.tip||0),n=Math.round(1e8*(t-a))/1e8;return{currentAHT:n,afterAHT:Math.round(1e8*(n-this.state.tip))/1e8}},a.tip=function(){var e=r()(s.a.mark(function e(t){var a,n,i,r,o,c,l=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=this.state.user){e.next=4;break}this.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fa fa-donate"})," エラー！"),body:m.a.createElement("p",null,"投げ銭をするにはログインが必要です！"),cancel_text:"確認"}),e.next=26;break;case 4:if(t.uid!==this.state.user.uid){e.next=8;break}this.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fa fa-donate"})," エラー！"),body:m.a.createElement("p",null,"自分の記事には投げ錢できません！"),cancel_text:"確認"}),e.next=26;break;case 8:if(a=this.getCurrentAHT(),n=a.currentAHT,a.afterAHT,0!==n){e.next=13;break}this.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-danger fa fa-donate"})," 残高不足！"),body:m.a.createElement("p",null,"投げ銭をするにはAHTを保有している必要があります！"),cancel_text:"確認"}),e.next=26;break;case 13:return e.next=15,this.set({tip:0});case 15:for(i=[.1,1,10,100],r=[],o=function(){var e=i[c];r.push(m.a.createElement("button",{className:"btn btn-primary m-3",style:{borderRadius:"50%",width:"60px",height:"60px"},onClick:function(){l.increaseTipAmount(e)}},e))},c=0;c<i.length;c++)o();r.push(m.a.createElement("button",{className:"btn btn-warning m-3",style:{borderRadius:"50%",width:"60px",height:"60px"},onClick:function(){l.resetTipAmount()}},"0")),window.$("#tip_amount").text(0),window.$("#currentAHT").text(n),window.$("#afterAHT").text(n),window.$("#modal_exec_btn").removeClass("btn-danger"),window.$("#modal_exec_btn").addClass("btn-gray"),this.showModal({title:m.a.createElement("div",null,m.a.createElement("i",{className:"text-primary fa fa-donate"})," ","投げ銭額を選択してください！"),body:m.a.createElement("div",null,m.a.createElement("div",{className:"text-center",style:{fontSize:"30px"}},m.a.createElement("b",{id:"tip_amount",className:"text-primary"},"0")," ",m.a.createElement("span",{className:"text-muted small",style:{fontSize:"12px"}},"AHT")),m.a.createElement("div",{className:"text-center"},r),m.a.createElement("div",{className:"text-center"},"保有:"," ",m.a.createElement("b",{className:"text-primary",id:"currentAHT"},n)," ",m.a.createElement("span",{className:"text-muted small"},"AHT")," ",m.a.createElement("i",{className:"fa fa-angle-double-right"})," ",m.a.createElement("b",{className:"text-danger",id:"afterAHT"},n)," ",m.a.createElement("span",{className:"text-muted small"},"AHT"))),exec_color:"gray",exec:function(){l.exec_tip(t)}});case 26:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.exec_tip=function(e){this.state.tip>0&&this.auth.tip(this.state.tip,e,this.state.magazine_id)},a.render_dashboard=function(){return"articles"===this.state.tab?this.render_dashboard_articles():"post"===this.state.tab?this.render_dashboard_post():this.render_dashboard_settings()},a.render_dashboard_post=function(){return m.a.createElement("div",{className:"card"},m.a.createElement(z,{articles_page:this.state.articles_page,nomore_articles:this.state.nomore_articles,magazine_id:this.state.magazine_id,magazineArticles:this.state.magazineArticles,userArticles:this.state.userArticles,showModal:this.showModal,auth:this.auth}))},a.render_dashboard_settings=function(){return m.a.createElement(T,{magazine_id:this.state.magazine_id,magazine:this.state.magazine,user:this.state.user,userInfo:this.state.userInfo,showModal:this.showModal,userMagazines:this.state.userMagazines,auth:this.auth})},a.drawMagazine=function(e){var t=[],a=e.articles,n=Array.isArray(a),s=0;for(a=n?a:a[Symbol.iterator]();;){var i;if(n){if(s>=a.length)break;i=a[s++]}else{if((s=a.next()).done)break;i=s.value}var r=i;t.push(m.a.createElement("tr",null,m.a.createElement("td",{className:"w-1"},m.a.createElement("a",{target:"_blank",href:"https://alis.to/users/"+r.user_id,className:"avatar",style:{backgroundImage:"url("+r.icon_image_url+")"}})),m.a.createElement("td",{className:"small"},m.a.createElement("a",{className:"text-dark",href:"https://alis.to/"+r.user_id+"/articles/"+r.article_id,target:"_blank"},r.title))))}return m.a.createElement("div",{className:"col-md-6 col-xl-4"},m.a.createElement("div",{className:"card"},m.a.createElement("a",{href:"/"+e.file_id+"/",style:{height:"150px",backgroundImage:"url("+(e.cover_image||"/img/bg-showcase-4.jpg")+")",backgroundSize:"cover"}}),m.a.createElement("div",{className:"card-body d-flex flex-column"},m.a.createElement("h4",{style:{lineHeight:"150%"}},m.a.createElement("a",{href:"/"+e.file_id+"/"},e.title)),m.a.createElement("div",{className:"text-muted",style:{fontSize:"12px"}},e.description)),m.a.createElement("div",{className:"table-responsive"},m.a.createElement("table",{className:"table card-table table-sm table-striped table-vcenter",style:{borderTop:"1px solid #dee2e6"}},m.a.createElement("tbody",null,t)))))},a.drawArticle=function(e){var t=this,a=e.last_tip||0,n=e.tip||0,s=this.state.tip_history||[],i=Array.isArray(s),r=0;for(s=i?s:s[Symbol.iterator]();;){var o;if(i){if(r>=s.length)break;o=s[r++]}else{if((r=s.next()).done)break;o=r.value}var c=o;c.article.article_id===e.article_id&&a<c.date&&this.state.magazine_id===(c.magazine_id||"admin")&&(n+=c.amount)}return n=Math.round(10*n)/10,m.a.createElement("div",{className:"col-md-6 col-xl-4"},m.a.createElement("div",{className:"card"},m.a.createElement("a",{target:"_blank",href:"https://alis.to/"+e.user_id+"/articles/"+e.article_id+"/",style:{height:"150px",backgroundImage:"url("+e.eye_catch_url+")",backgroundSize:"cover"}}),m.a.createElement("div",{className:"card-body d-flex flex-column"},m.a.createElement("h4",{style:{lineHeight:"150%"}},m.a.createElement("a",{target:"_blank",href:"https://alis.to/"+e.user_id+"/articles/"+e.article_id+"/"},e.title)),m.a.createElement("div",{className:"text-muted",style:{fontSize:"12px"}},e.overview,"..."),m.a.createElement("div",{className:"d-flex align-items-center pt-5 mt-auto"},m.a.createElement("div",{className:"avatar avatar-md mr-3",style:{backgroundImage:"url("+e.icon_image_url+")"}}),m.a.createElement("div",null,m.a.createElement("a",{target:"_blank",href:"https://alis.to/users/"+e.user_id,className:"text-default"},e.user_display_name),m.a.createElement("small",{className:"d-block text-muted"},_()(1e3*e.published_at).format("YYYY MM/DD"))),m.a.createElement("div",{className:"ml-auto text-danger"},m.a.createElement("a",{onClick:function(){t.tip(e)},className:"icon d-inline-block ml-3",style:{fontSize:"20px"}},m.a.createElement("i",{className:"fa fa-donate mr-1"})," ",m.a.createElement("b",{className:"text-primary"},n)," ",m.a.createElement("span",{style:{fontSize:"12px"}},"AHT")))))))},a.render_dashboard_articles=function(){for(var e,t=[],a=1;a<=Math.ceil(this.state.len/6);a++)this.state.page===a?t.push(m.a.createElement("li",{className:"page-item active",style:{cursor:"default"}},m.a.createElement("span",{className:"page-link",style:{cursor:"default"}},a))):t.push(m.a.createElement("li",{className:"page-item"},m.a.createElement("a",{className:"page-link",href:"/?page="+a},a)));e=m.a.createElement("div",{className:"pt-2 text-center"},m.a.createElement("div",{className:"d-inline-block"},m.a.createElement("ul",{className:"pagination"},t)));var n=[],s=this.state.magazine_articles,i=Array.isArray(s),r=0;for(s=i?s:s[Symbol.iterator]();;){var o;if(i){if(r>=s.length)break;o=s[r++]}else{if((r=s.next()).done)break;o=r.value}var c=o;"top"===this.state.magazine_id?n.push(this.drawMagazine(c)):n.push(this.drawArticle(c))}return m.a.createElement("div",null,m.a.createElement("h1",{className:"page-title",style:{textAlign:"center",fontFamily:"'Rounded Mplus 1c', 'Montserrat', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},this.getMagazineTitle(!0)),this.getMagazineDescription(),m.a.createElement("div",{className:"row row-cards row-deck"},n),e)},t}(f);t.default=J},156:function(e,t,a){var n;e.exports=(n=a(174))&&n.default||n},160:function(e,t,a){e.exports=a.p+"static/404-fcdd980d4bec9f5e4f577268926c400b.jpg"},162:function(e,t,a){"use strict";a.r(t),a.d(t,"graphql",function(){return h}),a.d(t,"StaticQueryContext",function(){return m}),a.d(t,"StaticQuery",function(){return p});var n=a(0),s=a.n(n),i=a(8),r=a.n(i),o=a(149),c=a.n(o);a.d(t,"Link",function(){return c.a}),a.d(t,"withPrefix",function(){return o.withPrefix}),a.d(t,"navigate",function(){return o.navigate}),a.d(t,"push",function(){return o.push}),a.d(t,"replace",function(){return o.replace}),a.d(t,"navigateTo",function(){return o.navigateTo});var l=a(156),d=a.n(l);a.d(t,"PageRenderer",function(){return d.a});var u=a(35);a.d(t,"parsePath",function(){return u.a});var m=s.a.createContext({}),p=function(e){return s.a.createElement(m.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):s.a.createElement("div",null,"Loading (StaticQuery)")})};function h(){throw new Error("It appears like Gatsby is misconfigured. Gatsby related `graphql` calls are supposed to only be evaluated at compile time, and then compiled away,. Unfortunately, something went wrong and the query was left in the compiled code.\n\n.Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.")}p.propTypes={data:r.a.object,query:r.a.string.isRequired,render:r.a.func,children:r.a.func}},168:function(e,t,a){"use strict";a(150),a(151),a(79),a(152);var n=a(12),s=a.n(n),i=a(0),r=a.n(i),o=a(159),c=a.n(o),l=a(160),d=a.n(l),u=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){var e,t;e="AHT TESTNET",t="testnet.";var a=[],n=this.props.title||"404ページ | "+e,s=this.props.desc||"史上初！マミぃさんに300AHTお支払いで描いていただいたハッカー部のイラストです。",i=this.props.image||"https://"+t+"alishackers.club"+d.a;a.push({name:"twitter:card",content:"summary_large_image"}),a.push({name:"twitter:site",content:"@alishackers"}),a.push({name:"twitter:image",content:i}),a.push({name:"twitter:description",content:s}),a.push({name:"twitter:title",content:n}),a.push({name:"og:title",content:n}),a.push({name:"og:image",content:i}),a.push({name:"og:description",content:s}),a.push({name:"description",content:s}),a.push({name:"keywords",content:"ALIS, ALISハッカー部, ハッカー部, ALIS HackerToken, 独自経済圏, トークンエコノミー, 暗号通貨, cryptocurrency, ハッカー部トークン, WAVES, 仮想通貨"});var o=[];if(void 0!=this.props.links){var l=this.props.links,u=Array.isArray(l),m=0;for(l=u?l:l[Symbol.iterator]();;){var p;if(u){if(m>=l.length)break;p=l[m++]}else{if((m=l.next()).done)break;p=m.value}var h=p;o.push({rel:"stylesheet",type:"text/css",href:h})}}else o=[{rel:"stylesheet",type:"text/css",href:"/tabler/css/tabler.min.css"},{rel:"stylesheet",type:"text/css",href:"/css/common.css"}];return r.a.createElement(c.a,{title:n,link:o,meta:a})},t}(i.Component);t.a=u},172:function(e,t,a){"use strict";var n=a(173),s=a(0),i=a.n(s),r=a(8),o=a.n(r),c=a(159),l=a.n(c),d=a(162),u=function(e){var t=e.children;return i.a.createElement(d.StaticQuery,{query:"755544856",render:function(e){return i.a.createElement("div",null,i.a.createElement(l.a,{title:e.site.siteMetadata.title,meta:[{name:"description",content:"法定通貨に依存しない完全独自経済圏"},{name:"keywords",content:"ALIS Hacker Token, ALISハッカー部"}]},i.a.createElement("html",{lang:"en"})),t)},data:n})};u.propTypes={children:o.a.node.isRequired},t.a=u},173:function(e){e.exports={data:{site:{siteMetadata:{title:"ALIS Hacker Token - ALISハッカー部"}}}}},174:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(8),r=a.n(i),o=a(47),c=a(1),l=function(e){var t=e.location,a=c.a.getResourcesForPathname(t.pathname);return s.a.createElement(o.a,{location:t,pageResources:a})};l.propTypes={location:r.a.shape({pathname:r.a.string.isRequired}).isRequired},t.default=l},175:function(e,t,a){"use strict";a(150),a(151),a(79),a(152);var n=a(12),s=a.n(n),i=a(0),r=a.n(i),o=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){var e=[],t=this.props.items||[{key:"twitter",href:"https://twitter.com/alishackers"},{key:"github",href:"https://github.com/alisista"},{key:"discord",href:"https://discord.gg/TyKbbrT"}],a=Array.isArray(t),n=0;for(t=a?t:t[Symbol.iterator]();;){var s;if(a){if(n>=t.length)break;s=t[n++]}else{if((n=t.next()).done)break;s=n.value}var i=s;e.push(r.a.createElement("li",{className:"list-inline-item"},r.a.createElement("a",{href:i.href,target:"_blank"},r.a.createElement("i",{className:"fab fa-"+i.key}))))}return r.a.createElement("footer",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("span",{className:"copyright"},"Copyright © ALISハッカー部 2018")),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("ul",{className:"list-inline social-buttons"},e)),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("ul",{className:"list-inline quicklinks"})))))},t}(i.Component);t.a=o},176:function(e,t,a){"use strict";a(177),a(150),a(151),a(79),a(152);var n=a(12),s=a.n(n),i=a(0),r=a.n(i),o=function(e){function t(t){return e.call(this,t)||this}return s()(t,e),t.prototype.render=function(){var e,t=this,a=this.props.title;if(a=this.props.title||"AHT TESTNET",void 0!=this.props.user){var n=0,s=0;if(void 0!=this.props.serverInfo&&void 0!=this.props.serverInfo.amount&&void 0!=this.props.serverInfo.amount.aht){var i=this.props.serverInfo.amount.aht;n=""+i.earned;var o=i.earned+(i.tipped||0),c=i.paid+(i.tip||0);s=Math.round(1e10*(o-c))/1e10;var l=this.props.payment||[];void 0!=l[0]&&"requested"==l[0].status&&(s-=l[0].amount)}s=Math.round(1e8*s)/1e8,n=Math.round(1e8*n)/1e8,void 0!=this.props.user&&void 0==this.props.user.linkTo?e=r.a.createElement("a",{href:"#",className:"nav-link pr-0 leading-none","data-toggle":"dropdown"},r.a.createElement("span",{className:"avatar",style:{backgroundImage:"url("+this.props.user.photoURL+")"}}),r.a.createElement("span",{className:"ml-2 d-none d-lg-block"},r.a.createElement("span",{className:"text-default"},this.props.user.displayName),r.a.createElement("small",{className:"text-muted d-block mt-1"},this.props.user.overrideText||s+" AHT 保 / "+n+" AHT 獲"))):void 0!=this.props.user&&void 0!=this.props.user.linkTo&&(e=r.a.createElement("a",{href:this.props.user.linkTo,target:"_blank",className:"nav-link pr-0 leading-none"},r.a.createElement("span",{className:"avatar",style:{backgroundImage:"url("+this.props.user.photoURL+")"}}),r.a.createElement("span",{className:"ml-2 d-none d-sm-block"},r.a.createElement("span",{className:"text-default"},this.props.user.displayName),r.a.createElement("small",{className:"text-muted d-block mt-1"},this.props.user.overrideText||n+" AHT"))))}var d,u,m=[],p=this.props.links||[],h=Array.isArray(p),f=0;for(p=h?p:p[Symbol.iterator]();;){var v;if(h){if(f>=p.length)break;v=p[f++]}else{if((f=p.next()).done)break;v=f.value}var g=v;m.push(r.a.createElement("div",{className:"nav-item d-none d-md-flex"},r.a.createElement("a",{href:g.href,className:"btn btn-sm btn-outline-primary"},g.name)))}return void 0!=this.props.user&&void 0==this.props.user.linkTo?d=r.a.createElement("div",{className:"dropdown"},e,r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right dropdown-menu-arrow"},r.a.createElement("a",{className:"dropdown-item",onClick:function(){t.props.auth.logout()}},r.a.createElement("i",{className:"dropdown-icon fe fe-log-out"})," ログアウト"))):void 0!=this.props.user&&void 0!=this.props.user.linkTo&&(d=r.a.createElement("a",{href:this.props.user.linkTo},e)),!0!==this.props.noSubHeader&&(u=r.a.createElement("a",{href:"#",className:"header-toggler d-lg-none ml-3 ml-lg-0","data-toggle":"collapse","data-target":"#headerMenuCollapse"},r.a.createElement("span",{className:"header-toggler-icon"}))),r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"flax-fill"},r.a.createElement("div",{className:"header py-4"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"d-flex"},r.a.createElement("a",{className:"header-brand",href:"/"},this.props.title||a),r.a.createElement("div",{className:"d-flex order-lg-2 ml-auto"},m,d),u)))))},t}(i.Component);t.a=o},238:function(e,t,a){e.exports=a.p+"static/alis_hackers-b0f73db538e1af4c194f9fc10871687e.png"},239:function(e,t,a){e.exports=a.p+"static/profile_cover-2c8f78baa8613f34088e1bad44b61288.jpg"}}]);
//# sourceMappingURL=component---src-pages-index-js-0ca7bebff85f736876c0.js.map